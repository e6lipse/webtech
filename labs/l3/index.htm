<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Лабораторна 3 - Коломієць Назарій</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />
    <link
      href="../../../css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../assets/css/lab3.css" />
  </head>

  <body>
    <div class="app">
      <div class="header">
        <div class="header--logo"></div>

        <div class="header--search">
          <input
            type="search"
            name="search"
            id="search"
            class="header--search-input"
            placeholder="Search"
          />
        </div>

        <div class="header--toolbar">
          <button class="header--toolbar--item">
            <div class="icon"></div>
          </button>
          <button class="header--toolbar--item">
            <div class="icon"></div>
          </button>
          <button class="header--toolbar--item">
            <div class="icon"></div>
          </button>
        </div>
      </div>

      <div class="container">
        <div class="sidebar scroll">
          <nav class="sidebar--nav">
            <a
              href="#"
              class="sidebar--nav--item sidebar--section--container--item"
            >
              <span class="icon"></span>
              <span class="text">Home</span>
            </a>

            <a
              href="#"
              class="sidebar--nav--item sidebar--section--container--item"
            >
              <span class="icon"></span>
              <span class="text">Shorts</span>
            </a>

            <a
              href="#"
              class="sidebar--nav--item sidebar--section--container--item"
            >
              <span class="icon"></span>
              <span class="text">Subscribes</span>
            </a>
          </nav>

          <hr />

          <section class="sidebar--section sidebar--profile">
            <div class="sidebar--section--title">You</div>

            <div class="sidebar--section--container">
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Option 1</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Option 2</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Option 3</div>
              </button>
            </div>
          </section>

          <hr />

          <section class="sidebar--section sidebar--subs">
            <div class="sidebar--section--title">Subscribes</div>

            <div class="sidebar--section--container">
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 1</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 2</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 3</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 4</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 5</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 6</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 7</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 8</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 9</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 10</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 11</div>
              </button>
              <button class="sidebar--section--container--item">
                <div class="icon"></div>
                <div class="text">Channel 12</div>
              </button>
            </div>
          </section>
        </div>

        <div class="content scroll">
          <div class="category scroll">
            <button class="category--item">Category 1</button>
            <button class="category--item">Category 2</button>
            <button class="category--item">Category 3</button>
            <button class="category--item">Category 4</button>
            <button class="category--item">Category 5</button>
            <button class="category--item">Category 6</button>
            <button class="category--item">Category 7</button>
            <button class="category--item">Category 8</button>
            <button class="category--item">Category 9</button>
            <button class="category--item">Category 10</button>
          </div>

          <div class="main">
            <div class="item">
              <div class="item-img">
                <div class="item-img--num">1</div>
              </div>
              <div class="item-body">
                <div class="item--title">
                  Lorem ipsum dolor sit amet consectetur adipisicing elit.
                  Itaque, aspernatur.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      (function () {
        let counter = 1;

        let target = document.querySelector('.item:last-child');

        const updateObserver = () => {
          target && intersectionObserver.unobserve(target);
          target = document.querySelector('.item:last-child');
          intersectionObserver.observe(target);
        };

        const addItem = () => {
          const el = document.createElement('div');
          el.classList.add('item');
          el.innerHTML = `<div class="item-img"><div class="item-img--num">${++counter}</div></div>
    <div class="item-body">
      <div class="item--title">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Itaque, aspernatur.
      </div>
    </div>`;

          document.querySelector('.main').appendChild(el);
        };

        const addItems = (n) =>
          Array.from(
            {
              length: n,
            },
            () => addItem()
          );

        const intersectionObserver = new IntersectionObserver((entries) => {
          if (entries[0].intersectionRatio <= 0) return;

          addItems(15);

          updateObserver();
        });

        intersectionObserver.observe(target);
      })();
    </script>
  </body>
</html>
